{% extends "base.html" %}

{% block title %}
    {{ blogpost.title_tag }}
{% endblock %}

{% block content %}

<h1>{{ blogpost.title }}</h1>
<strong>
    By: {{ blogpost.author.first_name }} {{ blogpost.author.last_name }} On: {{ blogpost.created_at | date:"F d, Y - P" }}
</strong>
{% if user.is_authenticated %}
    {% if user.id == blogpost.author.id %}
        <a href="{% url 'edit-post' blogpost.pk %}">
            <strong>
                - 
                [Edit Post]
            </strong>
        </a>
        |
        <a href="{% url 'delete-post' blogpost.pk %}">
            <strong>
                [Delete Post]
            </strong>
        </a>
    {% endif %}
{% endif %}
<br/>
<small>@{{ blogpost.author }}</small><br><hr>
<p>{{ blogpost.content | linebreaks }}</p>

<br><hr><br>
{% if user.is_authenticated %}
    <form action="{% url 'like-post' blogpost.pk %}" method="POST">
        {% csrf_token %}
        <button type="submit" name="post_id" value="{{ blogpost.id }}" class="btn btn-primary btn-sm">
            {% if has_liked %}
                Liked
            {% else %}
                Like
            {% endif %}
        </button>
        {% if blogpost.likes.count > 0 %}
             - {{ blogpost.likes.count }} Like{{ blogpost.likes.count|pluralize }}
        {% endif %}
    </form>
{% endif %}

<br><hr><br>

<a href="{% url 'home' %}" class="btn btn-secondary">Back to Home</a>
{% endblock %}